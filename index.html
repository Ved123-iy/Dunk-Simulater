<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>üèÄ Dunk Simulator</title>
<style>
  body{
    margin:0;
    background:#0b0f18;
    color:white;
    text-align:center;
    font-family:Arial;
  }
  h1{margin:18px 0 5px;}
  canvas{
    background:#111827;
    border-radius:20px;
    margin:10px auto 10px;
    display:block;
    box-shadow:0 20px 50px rgba(0,0,0,.6);
    max-width: 96vw;
    height: auto;
  }
  .score{font-size:20px;margin-top:8px}
  .tip{opacity:.75;margin:6px 0 10px;font-size:14px}
  .controls{
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
    padding:10px 12px 18px;
  }
  .btn{
    padding:12px 16px;
    border-radius:14px;
    border:0;
    font-weight:800;
    cursor:pointer;
    background:#1f2937;
    color:#fff;
    min-width:90px;
  }
  .btn.jump{background:#f59e0b;color:#0b1020}
</style>
</head>
<body>

<h1>üèÄ Dunk Simulator</h1>
<div class="score">Score: <span id="score">0</span></div>
<div class="tip">Move: A/D or ‚Üê/‚Üí ‚Ä¢ Jump: Space ‚Ä¢ Phone: use buttons</div>

<canvas id="game" width="800" height="450"></canvas>

<div class="controls">
  <button class="btn" id="leftBtn">‚¨Ö Left</button>
  <button class="btn jump" id="jumpBtn">‚§¥ Jump</button>
  <button class="btn" id="rightBtn">Right ‚û°</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");

let score = 0;
let flash = 0;

const floorY = 350;

let player = {
  x: 140,
  y: 300,
  r: 25,
  vy: 0,
  jumping: false,
  speed: 5
};

let hoop = {
  x: 620,
  y: 210,
  radius: 35
};

const gravity = 0.6;

// keys
const keys = { left:false, right:false };

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // floor
  ctx.fillStyle="#1f2937";
  ctx.fillRect(0,floorY,canvas.width,canvas.height-floorY);

  // backboard
  ctx.fillStyle="#e5e7eb";
  ctx.fillRect(hoop.x+30, hoop.y-60, 10, 70);

  // rim (half circle)
  ctx.strokeStyle="#f97316";
  ctx.lineWidth=6;
  ctx.beginPath();
  ctx.arc(hoop.x, hoop.y, hoop.radius, Math.PI, 0);
  ctx.stroke();

  // dunk flash
  if(flash>0){
    ctx.fillStyle="rgba(255,176,0,0.25)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    flash--;
  }

  // player body
  ctx.fillStyle="#06b6d4";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.r, 0, Math.PI*2);
  ctx.fill();

  // ball
  ctx.fillStyle="#ffb000";
  ctx.beginPath();
  ctx.arc(player.x, player.y-35, 12, 0, Math.PI*2);
  ctx.fill();

  // little ‚Äútarget‚Äù hint under hoop
  ctx.fillStyle="rgba(255,255,255,0.08)";
  ctx.fillRect(hoop.x-40, floorY-6, 80, 6);
}

function update(){
  // movement
  if(keys.left)  player.x -= player.speed;
  if(keys.right) player.x += player.speed;

  // keep in bounds
  player.x = Math.max(player.r, Math.min(canvas.width-player.r, player.x));

  // gravity
  player.vy += gravity;
  player.y += player.vy;

  // floor collision
  if(player.y > 300){
    player.y = 300;
    player.vy = 0;
    player.jumping = false;
  }

  // dunk detection (only count once per jump)
  const nearHoop = Math.abs(player.x - hoop.x) < 42;
  const highEnough = player.y < hoop.y + 25;

  if(player.jumping && nearHoop && highEnough){
    score++;
    scoreEl.textContent = score;
    flash = 10;

    // move hoop
    hoop.x = 420 + Math.random()*320;

    // prevent multi-score in one jump
    player.jumping = false;
  }
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

function jump(){
  // only jump if on ground
  if(player.y >= 300 && player.vy === 0){
    player.vy = -14;
    player.jumping = true;
  }
}

// keyboard controls
document.addEventListener("keydown", (e)=>{
  if(e.code === "ArrowLeft" || e.code === "KeyA") keys.left = true;
  if(e.code === "ArrowRight" || e.code === "KeyD") keys.right = true;
  if(e.code === "Space") jump();
});

document.addEventListener("keyup", (e)=>{
  if(e.code === "ArrowLeft" || e.code === "KeyA") keys.left = false;
  if(e.code === "ArrowRight" || e.code === "KeyD") keys.right = false;
});

// mobile buttons (press-and-hold)
const leftBtn = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");
const jumpBtn = document.getElementById("jumpBtn");

function hold(btn, onDown, onUp){
  btn.addEventListener("pointerdown", (e)=>{ e.preventDefault(); onDown(); });
  btn.addEventListener("pointerup", (e)=>{ e.preventDefault(); onUp(); });
  btn.addEventListener("pointerleave", (e)=>{ e.preventDefault(); onUp(); });
  btn.addEventListener("pointercancel", (e)=>{ e.preventDefault(); onUp(); });
}

hold(leftBtn, ()=>keys.left=true, ()=>keys.left=false);
hold(rightBtn, ()=>keys.right=true, ()=>keys.right=false);
jumpBtn.addEventListener("click", jump);

loop();
</script>
</body>
</html>
